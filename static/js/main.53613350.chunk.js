(this["webpackJsonpsolitaire-react"]=this["webpackJsonpsolitaire-react"]||[]).push([[0],{11:function(a,e,t){},12:function(a,e,t){"use strict";t.r(e);var r=t(0),d=t.n(r),o=t(2),s=t.n(o);const l=[{suit:"spade",value:1,color:"black",unicode:"\ud83c\udca1"},{suit:"spade",value:2,color:"black",unicode:"\ud83c\udca2"},{suit:"spade",value:3,color:"black",unicode:"\ud83c\udca3"},{suit:"spade",value:4,color:"black",unicode:"\ud83c\udca4"},{suit:"spade",value:5,color:"black",unicode:"\ud83c\udca5"},{suit:"spade",value:6,color:"black",unicode:"\ud83c\udca6"},{suit:"spade",value:7,color:"black",unicode:"\ud83c\udca7"},{suit:"spade",value:8,color:"black",unicode:"\ud83c\udca8"},{suit:"spade",value:9,color:"black",unicode:"\ud83c\udca9"},{suit:"spade",value:10,color:"black",unicode:"\ud83c\udcaa"},{suit:"spade",value:11,color:"black",unicode:"\ud83c\udcab"},{suit:"spade",value:12,color:"black",unicode:"\ud83c\udcad"},{suit:"spade",value:13,color:"black",unicode:"\ud83c\udcae"},{suit:"club",value:1,color:"black",unicode:"\ud83c\udcd1"},{suit:"club",value:2,color:"black",unicode:"\ud83c\udcd2"},{suit:"club",value:3,color:"black",unicode:"\ud83c\udcd3"},{suit:"club",value:4,color:"black",unicode:"\ud83c\udcd4"},{suit:"club",value:5,color:"black",unicode:"\ud83c\udcd5"},{suit:"club",value:6,color:"black",unicode:"\ud83c\udcd6"},{suit:"club",value:7,color:"black",unicode:"\ud83c\udcd7"},{suit:"club",value:8,color:"black",unicode:"\ud83c\udcd8"},{suit:"club",value:9,color:"black",unicode:"\ud83c\udcd9"},{suit:"club",value:10,color:"black",unicode:"\ud83c\udcda"},{suit:"club",value:11,color:"black",unicode:"\ud83c\udcdb"},{suit:"club",value:12,color:"black",unicode:"\ud83c\udcdd"},{suit:"club",value:13,color:"black",unicode:"\ud83c\udcde"},{suit:"diamond",value:1,color:"red",unicode:"\ud83c\udcc1"},{suit:"diamond",value:2,color:"red",unicode:"\ud83c\udcc2"},{suit:"diamond",value:3,color:"red",unicode:"\ud83c\udcc3"},{suit:"diamond",value:4,color:"red",unicode:"\ud83c\udcc4"},{suit:"diamond",value:5,color:"red",unicode:"\ud83c\udcc5"},{suit:"diamond",value:6,color:"red",unicode:"\ud83c\udcc6"},{suit:"diamond",value:7,color:"red",unicode:"\ud83c\udcc7"},{suit:"diamond",value:8,color:"red",unicode:"\ud83c\udcc8"},{suit:"diamond",value:9,color:"red",unicode:"\ud83c\udcc9"},{suit:"diamond",value:10,color:"red",unicode:"\ud83c\udcca"},{suit:"diamond",value:11,color:"red",unicode:"\ud83c\udccb"},{suit:"diamond",value:12,color:"red",unicode:"\ud83c\udccd"},{suit:"diamond",value:13,color:"red",unicode:"\ud83c\udcce"},{suit:"heart",value:1,color:"red",unicode:"\ud83c\udcb1"},{suit:"heart",value:2,color:"red",unicode:"\ud83c\udcb2"},{suit:"heart",value:3,color:"red",unicode:"\ud83c\udcb3"},{suit:"heart",value:4,color:"red",unicode:"\ud83c\udcb4"},{suit:"heart",value:5,color:"red",unicode:"\ud83c\udcb5"},{suit:"heart",value:6,color:"red",unicode:"\ud83c\udcb6"},{suit:"heart",value:7,color:"red",unicode:"\ud83c\udcb7"},{suit:"heart",value:8,color:"red",unicode:"\ud83c\udcb8"},{suit:"heart",value:9,color:"red",unicode:"\ud83c\udcb9"},{suit:"heart",value:10,color:"red",unicode:"\ud83c\udcba"},{suit:"heart",value:11,color:"red",unicode:"\ud83c\udcbb"},{suit:"heart",value:12,color:"red",unicode:"\ud83c\udcbd"},{suit:"heart",value:13,color:"red",unicode:"\ud83c\udcbe"}];var i=t(3),u=t.n(i);var c=class{constructor(){this.deck=null,this.tableaus=[],this.foundations=[],this.showCardPile=null}addShuffledPile(a){this.deck=a}drawCard(){return this.deck.drawCard()}setShowCardPile(a){this.showCardPile=a}reloadDeck(){if(!this.showCardPile.isEmpty())return this.deck.addCard(this.showCardPile.drawCard()),this.reloadDeck()}changeCard(){if(this.deck.isEmpty())return this.reloadDeck();this.showCardPile.addCard(this.drawCard())}addTableau(a){this.tableaus.push(a)}getTopMostCard(){return this.showCardPile.getLastCard()}addFoundation(a){this.foundations.push(a)}addCardToReservedPile(a,e){return(e=e.split("_")).includes("showCard")?this.addCardToReservedPileFromWaste(a):e.includes("tableau")?this.addCardToFoundationFromTableau(a,e[1],e[2]):void 0}addCardToStackPile(a,e){return e=e.split("_"),console.log(e),e.includes("showCard")?this.addCardToStackPileFromWaste(a):e.includes("foundation")?this.addCardToStackPileFromFoundation(a,e[1]):(console.log(this.tableaus[e[1]],"61"),this.addCardToTableauFromTableau(a,e[1],+e[2]))}addCardToStackPileFromWaste(a){const e=this.tableaus[a],t=this.showCardPile,r=e.isAddableToStackPile(t.getLastCardValue()),d=e.isAlternateColor(t.getLastCardColor());return r&&d&&e.addCard(t.drawCard()),r&&d}addCardToReservedPileFromWaste(a){const e=this.foundations[a],t=this.showCardPile,r=e.isAddableToReservedPile(+t.getLastCardValue()),d=e.isSameSuit(t.getLastCardSuit());return r&&d&&e.addCard(t.drawCard()),r&&d}addCardToStackPileFromFoundation(a,e){const t=this.tableaus[a],r=this.foundations[e],d=t.isAddableToStackPile(r.getLastCardValue()),o=t.isAlternateColor(r.getLastCardColor());return d&&o&&t.addCard(r.drawCard()),d&&o}addCardToFoundationFromTableau(a,e,t){if(t>1)return!1;const r=this.foundations[a],d=this.tableaus[e],o=r.isAddableToReservedPile(+d.getLastCardValue()),s=r.isSameSuit(d.getLastCardSuit());return o&&s&&r.addCard(d.drawCard()),o&&s}addCardToTableauFromTableau(a,e,t){const r=this.tableaus[a],d=this.tableaus[e],o=r.isAddableToStackPile(d.getCardValue(t)),s=r.isAlternateColor(d.getCardColor(t));return o&&s&&(console.log(t),r.addCards(d.drawCards(t))),o&&s}isDraggable(a){return a.isDraggable()}};var n=class{constructor(){this.cards=[]}addCard(a){this.cards.push(a)}addCards(a){a.forEach(a=>this.addCard(a))}getLastCard(){return this.cards[this.cards.length-1]}getCard(a){return this.cards[this.cards.length-+a]}getCardValue(a){return this.getCard(a)?this.getCard(a).value:0}getCardColor(a){return this.getCard(a).color}getLastCardValue(){return this.getLastCard()?+this.getLastCard().value:0}getLastCardColor(){return this.getLastCard().color}getLastCardSuit(){return this.getLastCard().suit}drawCard(){return this.cards.pop()}drawCards(a){console.log(a);let e=new Array(a).fill(1);return e=e.map(a=>this.drawCard()),console.log(e),e.reverse(),console.log(e),e}isDraggable(){return this.cards.length>0}blockLastCard(){this.getLastCard().blockCard()}revealLastCard(){this.getLastCard().revealCard()}isAddableToStackPile(a){return 0===this.getLastCardValue()?13===a:+this.getLastCardValue()===+a+1}isAddableToReservedPile(a){return this.getLastCardValue()===+a-1}isAlternateColor(a){return!this.getLastCard()||this.getLastCardColor()!==a}isSameSuit(a){return!this.getLastCard()||this.getLastCardSuit()===a}isEmpty(){return 0===this.cards.length}getAllCards(){return this.cards}};var h=class{constructor({suit:a,color:e,value:t,unicode:r}){this.suit=a,this.color=e,this.value=t,this.unicode=r,this.isBlockedCard=!1,this.actualUnicode=r,this.actualColor=e}getUnicode(){return this.unicode}blockCard(){this.isBlockedCard=!0,this.unicode="\ud83c\udca0",this.color="black"}revealCard(){this.isBlockedCard=!1,this.unicode=this.actualUnicode,this.color=this.actualColor}isBlocked(){return this.isBlockedCard}};const C=new h({unicode:"\ud83c\udca0"}),g=new h({unicode:"\ud83c\udcdf"});class v extends d.a.Component{constructor(a){super(a),this.pile=new n,this.state={game:this.startGame()}}startGame(){const a=new c;return a.addShuffledPile(this.initializePile()),this.setFoundations(a),this.setTableaus(a),a.setShowCardPile(new n),a}initializePile(){const a=new n;return u.a.shuffle(l).forEach(e=>{a.addCard(new h(e))}),a}setTableaus(a){for(let e=0;e<7;e++){let t=new n;for(let r=0;r<=e;r++)t.addCard(a.drawCard()),t.blockLastCard();t.revealLastCard(),a.addTableau(t)}}setFoundations(a){for(let e=0;e<4;e++)a.addFoundation(new n)}updateDeck(){this.setState(a=>{const e=a.game;return e.changeCard(),{game:e}})}allowDrop(a){a.preventDefault()}drag(a){a.dataTransfer.setData("id",a.target.id)}dropInFoundation(a,e){e.preventDefault();const t=e.dataTransfer.getData("id");this.setState(e=>{const r=e.game;return r.addCardToReservedPile(a,t),{game:r}})}showAllTableauCards(a,e){const t=a.cards.length;return 0===t?d.a.createElement("div",{className:"tableauCard"},g.getUnicode()):a.cards.map((a,r)=>(r+1===t&&a.revealCard(),a.isBlocked()?d.a.createElement("div",{className:"tableauCard",style:this.getColor(a),draggable:"false"},a.getUnicode()):d.a.createElement("div",{className:"tableauCard",id:"tableau_"+e+"_"+(t-r),draggable:"true",onDragStart:this.drag,style:this.getColor(a)},a.getUnicode())))}getAllTableauCards(){return this.state.game.tableaus.map((a,e)=>d.a.createElement("div",{className:"card",id:"tableau_"+e,onDrop:this.dropInTableau.bind(this,e),onDragOver:this.allowDrop},this.showAllTableauCards(a,e)))}getAllFoundationCards(){return this.state.game.foundations.map((a,e)=>{let t=a.getLastCard();return t||(t=g),d.a.createElement("div",{id:"foundation_"+e,className:"foundationCard",draggable:"true",onDragStart:this.drag,onDrop:this.dropInFoundation.bind(this,e),onDragOver:this.allowDrop,style:this.getColor(t)},t.getUnicode())})}getColor(a){return{color:a.color}}showTopCard(){let a=this.state.game.getTopMostCard();return a||(a=g),d.a.createElement("div",{id:"showCard",className:"card",style:this.getColor(a),draggable:this.state.game.showCardPile.isDraggable(),onDragStart:this.drag},a.getUnicode())}dropInTableau(a,e){e.preventDefault();const t=e.dataTransfer.getData("id");console.log(t),this.setState(e=>{const r=e.game;return r.addCardToStackPile(a,t),{game:r}})}allCards(){return d.a.createElement("div",null,d.a.createElement("div",null,d.a.createElement("div",{className:"stock"},d.a.createElement("div",{onClick:this.updateDeck.bind(this),className:"foundationCard"},C.getUnicode()),d.a.createElement("div",{id:"wasteCard",onDragStart:this.drag,onDragOver:this.allowDrop,draggable:"true",className:"foundationCard"},this.showTopCard()),d.a.createElement("div",{className:"foundtionDeck"},this.getAllFoundationCards()))),d.a.createElement("div",{className:"deck"},this.getAllTableauCards()))}render(){return d.a.createElement("div",{className:"main"},this.allCards())}}var b=v;t(11);s.a.render(d.a.createElement("div",null,d.a.createElement(b,null)),document.getElementById("root"))},4:function(a,e,t){a.exports=t(12)}},[[4,1,2]]]);
//# sourceMappingURL=main.53613350.chunk.js.map